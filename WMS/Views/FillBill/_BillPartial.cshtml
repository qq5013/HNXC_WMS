<script type="text/javascript">
//查询按钮事件
    function billQueryClick() {
        var billno = $('#BillInfo').val();
        $('#BillDetail').datagrid({ url: '/FillBill/billselect/?page=1&rows=30&billmethod=' + $('#BILL_METHOD').combobox('getValue') + '&billno=' + billno });
        $("#BillDetail").datagrid('reload');
    }
    function billselected() {
        var billRow = $('#BillDetail').datagrid('getSelected');
        if (billRow) {
            $('#SOURCE_BILLNO').val(billRow.BILL_NO);
            $('#BarcodeDetail').datagrid({ url: '/FillBill/barcodeselect/?page=1&rows=50&soursebill=' + billRow.BILL_NO });
            $("#BarcodeDetail").datagrid('reload');
        }
    }
    //确定按钮
    function comfirm() {
        var data = $('#BarcodeDetail').datagrid('getSelections');
        if (data)
            $('#inBillDetail').datagrid('loadData', data);
        $('#BillData').dialog('close');
    }

    $(function () {
        $('#BillDetail').datagrid({
            onClickRow: function () {
                billselected();
            }
        })
    });
</script>
<div id="BillData" class="easyui-dialog" modal="true" style="width: 790px; height: 500px;
    padding: 0px 0px" closed="true" buttons="#dlgProduct-buttons">
    <div region="center" split="true" border="false" style="width: 770px; height: 200px">
        <table id="BillDetail" class="easyui-datagrid" border="false" toolbar="#btn-query"
            singleselect="true" fit="true" fitcolumns="false" pagination="true" rownumbers="true">
            <thead>
                <tr>
                    <th field="BILL_NO" width="100">
                        单据编号
                    </th>
                    <th field="BILL_DATE" width="150">
                        单据日期
                    </th>
                    <th field="BTYPE_CODE" width="100" hidden="true">
                        入库类型代码
                    </th>
                    <th field="BTYPE_NAME" width="100" >
                        入库类型
                    </th>
                    <th field="BILLMETHODNAME" width="100">
                      入库方式
                    </th>
                    <th field="SCHEDULE_NO" width="80"  hidden="true">
                        计划单号
                    </th>
                      <th field="LINE_NO" width="80"  hidden="true">
                        制丝线
                    </th>
                      <th field="CIGARETTE_CODE" width="80">
                        牌号
                    </th>
                      <th field="FORMULA_CODE" width="80">
                        配方
                    </th>
                      <th field="BATCH_WEIGHT" width="80">
                        批次重量
                    </th>
                      <th field="OPERATER" width="80">
                        操作人
                    </th>
                    <th field="OPERATE_DATE" width="60">
                        操作日期
                    </th>
                    <th field="CHECKER" width="80">
                        审核人
                    </th>
                    <th field="CHECK_DATE" width="60">
                        审核日期
                    </th>
                    <th field="TASKER" width="60">
                        作业人
                    </th>
                    <th field="TASK_DATE" width="60">
                        作业日期
                    </th>
                </tr>
            </thead>
        </table>
    </div>
<div region="south" split="true" border="false" style="height: 220px;  border-top-width: 1px;  border-top-style: solid; border-top-width: 1px; border-top-color: 99BBE8;">
<table id="BarcodeDetail" class="easyui-datagrid" border="false"  selectOnCheck="true"  pageSize="50" 
            singleselect="false" fit="true" fitcolumns="false" pagination="true" rownumbers="true">
            <thead>
                <tr>
                   <th checkbox="true">选择</th>
                    <th field="PRODUCT_BARCODE" width="100">
                        产品条码
                    </th>
                    <th field="PRODUCT_CODE" width="150">
                        产品代码
                    </th>
                    <th field="PRODUCT_NAME" width="100">
                        产品名称
                    </th>
                    <th field="SCHEDULE_NO" width="80">
                        计划单号
                    </th>
                      <th field="WEIGHT" width="80">
                        重量
                    </th>
                      <th field="REAL_WEIGHT" width="80">
                        实际重量
                    </th>
                      <th field="OUT_BILLNO" width="80">
                        出库单号
                    </th>
                      <th field="IS_MIX" width="80" hidden="true">
                        混装代码
                    </th>
                    <th field="IS_MIXDESC" width="80">是否混装</th>
                    <th field="PACKAGE_COUNT" width="80"> 包数</th>
                </tr>
            </thead>
        </table>
</div>
</div>
<div id="dlgProduct-buttons">
      <input type="button"  onclick="comfirm() "  onmouseover="btmouseup(this)" onmouseout="btmouseout(this)"  class="btok" value="确定"/>
       <input type="button"  onclick="javascript:$('#BillData').dialog('close')" onmouseover="btmouseup(this)" onmouseout="btmouseout(this)"  class="btcance" value="取消"/>
</div>
<div id="btn-query">
<select id="queryType" name="QueryString" class="easyui-combobox" style="width: 100px;" readonly="true">
		                <option value="billno">单据编号</option>
	                </select>
                    <input id="BillInfo">
 <a href="#" class="easyui-linkbutton" iconcls="icon-search" plain="true" onclick="billQueryClick()" id="billQuery">查询</a>
</div>


